<!doctype html>
<html lang="kk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TazaEL ‚Äî Eco System</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

  <style>
    :root{
      --bg0:#06130f;
      --bg1:#071b13;
      --card: rgba(255,255,255,.06);
      --stroke: rgba(255,255,255,.12);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.70);
      --muted2: rgba(255,255,255,.58);
      --good:#6cf2a6;
      --warn:#ffd166;
      --bad:#ff5c7a;
      --accent:#54ffb0;
      --accent2:#3aa0ff;
      --shadow: 0 20px 60px rgba(0,0,0,.35);
      --radius: 22px;
      --max: 1200px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}

    /* === –§–û–ù (–≠–ö–û–õ–û–ì–ò–Ø–õ–´“ö) === */
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background:
        linear-gradient(135deg, rgba(6, 20, 15, 0.85), rgba(4, 12, 10, 0.95)),
        url('https://images.unsplash.com/photo-1511497584788-876760111969?q=80&w=2670&auto=format&fit=crop') center center / cover no-repeat fixed;
      overflow-x:hidden;
    }

    a{color:inherit; text-decoration:none}
    button{font-family:inherit}
    .wrap{max-width:var(--max); margin:0 auto; padding: 0 20px}
    .glass{
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.05));
      border: 1px solid var(--stroke);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
    }
    .pill{
      display:inline-flex; gap:10px; align-items:center;
      padding: 10px 14px;
      border-radius: 999px;
      border: 1px solid var(--stroke);
      background: rgba(0,0,0,.18);
      color: var(--muted);
      font-size: 12px;
      letter-spacing:.2px;
      user-select:none;
    }
    .dot{
      width:10px; height:10px; border-radius:999px;
      background: radial-gradient(circle at 30% 30%, #fff, rgba(255,255,255,.25) 35%, transparent 60%),
                  linear-gradient(180deg, var(--accent), rgba(84,255,176,.35));
      box-shadow: 0 0 18px rgba(84,255,176,.35);
    }

    /* === NEON LOGO ANIMATION === */
    @keyframes neonPulse {
      0% { text-shadow: 0 0 5px #54ffb0, 0 0 10px #3aa0ff; opacity: 1; }
      50% { text-shadow: 0 0 20px #54ffb0, 0 0 35px #3aa0ff; opacity: 0.9; }
      100% { text-shadow: 0 0 5px #54ffb0, 0 0 10px #3aa0ff; opacity: 1; }
    }
    .neon-brand h1 {
        font-size: 28px;
        font-weight: 900;
        background: linear-gradient(90deg, #54ffb0, #3aa0ff);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        animation: neonPulse 2s infinite alternate;
    }
    /* =========================== */

    /* NAV */
    .nav{
      position: sticky; top: 0; z-index: 50;
      background: rgba(0,0,0,.4);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid rgba(255,255,255,.08);
    }
    .nav .row{display:flex; align-items:center; justify-content:space-between; padding: 14px 0; gap:12px;}
    .brand{display:flex; align-items:center; gap:12px; min-width: 220px;}
    
    .navlinks{display:flex; gap:10px; align-items:center; color: var(--muted); font-size: 13px; flex-wrap:wrap;}
    .navlinks a{padding: 10px 12px; border-radius: 12px; border: 1px solid transparent; transition: .2s ease;}
    .navlinks a:hover{border-color: rgba(255,255,255,.14); background: rgba(255,255,255,.05); color: rgba(255,255,255,.9);}
    .cta{
      display:inline-flex; align-items:center; gap:10px;
      padding: 12px 14px; border-radius: 14px;
      border: 1px solid rgba(255,255,255,.16);
      background:
        radial-gradient(120px 80px at 30% 20%, rgba(84,255,176,.25), transparent 60%),
        radial-gradient(140px 90px at 70% 80%, rgba(58,160,255,.18), transparent 60%),
        rgba(255,255,255,.06);
      color: rgba(255,255,255,.92);
      cursor:pointer;
      transition: .2s ease;
      white-space:nowrap;
    }
    .cta:hover{transform: translateY(-1px); background: rgba(255,255,255,.08)}
    .cta:active{transform: translateY(0px)}
    @media (max-width: 980px){
      .navlinks{display:none}
    }

    /* HERO */
    header.hero{padding: 36px 0 10px}
    .heroGrid{display:grid; grid-template-columns: 1.2fr .8fr; gap: 16px; align-items:stretch;}
    @media (max-width: 980px){ .heroGrid{grid-template-columns:1fr; } }

    .heroCard{padding: 18px; position:relative; overflow:hidden;}
    .heroCard:before{
      content:""; position:absolute; inset:-1px; pointer-events:none;
      background:
        radial-gradient(520px 280px at 10% 0%, rgba(84,255,176,.15), transparent 60%),
        radial-gradient(420px 300px at 95% 30%, rgba(58,160,255,.12), transparent 60%);
      opacity:.8;
    }
    .heroTitle{position:relative; display:flex; flex-direction:column; gap: 10px;}
    .heroTitle h2{margin:0; font-size: clamp(26px, 4vw, 42px); line-height: 1.05; letter-spacing: -.6px; font-weight: 800;}
    .heroTitle p{margin:0; color: var(--muted); font-size: 13px; line-height:1.6; max-width: 70ch;}

    /* Animated news ticker */
    .newsBox{
      position:relative;
      margin-top: 12px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      overflow:hidden;
    }
    .newsTop{display:flex; align-items:center; justify-content:space-between; gap:10px; padding: 12px 12px 10px;}
    .newsTop .label{color: var(--muted2); font-size: 12px; font-weight: 800; letter-spacing:.25px; text-transform: uppercase;}
    .pulse{
      display:inline-flex; align-items:center; gap:8px;
      color: rgba(255,255,255,.86);
      font-size: 12px;
    }
    .pulse i{
      width:10px; height:10px; border-radius:999px;
      background: linear-gradient(180deg, var(--bad), rgba(255,92,122,.25));
      box-shadow: 0 0 22px rgba(255,92,122,.35);
      animation: beat 1.2s ease-in-out infinite;
    }
    @keyframes beat{0%,100%{transform:scale(1)}50%{transform:scale(1.35)}}
    .marquee{
      border-top: 1px solid rgba(255,255,255,.10);
      padding: 10px 0;
      overflow:hidden;
      position:relative;
    }
    .marqueeTrack{
      display:flex;
      gap: 24px;
      width:max-content;
      animation: marquee 18s linear infinite;
      will-change: transform;
      padding-left: 14px;
    }
    @keyframes marquee{to{transform:translateX(-50%)}}
    .headline{
      display:inline-flex; align-items:center; gap:10px;
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      color: rgba(255,255,255,.84);
      font-size: 12px;
      white-space:nowrap;
    }
    .headline b{font-weight:900}
    .spark{
      width:10px; height:10px; border-radius:999px;
      background: linear-gradient(180deg, var(--accent), rgba(84,255,176,.25));
      box-shadow: 0 0 14px rgba(84,255,176,.30);
    }

    /* Facts rotator */
    .factBox{
      margin-top: 12px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      padding: 12px;
      position:relative;
      overflow:hidden;
    }
    .factBox .top{display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:8px;}
    .factBox .t{color: var(--muted2); font-size: 12px; font-weight: 800; letter-spacing:.25px; text-transform: uppercase;}
    .factText{margin:0; font-weight:800; letter-spacing:-.2px; line-height:1.35;}
    .factSub{margin: 6px 0 0; color: var(--muted); font-size: 12px; line-height:1.5;}
    .miniBar{height:6px; border-radius:999px; background: rgba(255,255,255,.10); overflow:hidden; border:1px solid rgba(255,255,255,.10);}
    .miniBar > div{height:100%; width:0%; background: linear-gradient(90deg, rgba(84,255,176,.9), rgba(58,160,255,.75)); border-radius:999px;}

    /* Generic sections */
    section{padding: 14px 0}
    .sectionHead{display:flex; align-items:flex-end; justify-content:space-between; gap: 12px; margin: 10px 0 10px;}
    .sectionHead h3{margin:0; font-size: 18px; letter-spacing:-.2px; font-weight: 900;}
    .sectionHead p{margin:0; color: var(--muted); font-size: 12px; line-height:1.5; max-width: 80ch;}
    .card{padding: 16px; border-radius: var(--radius); border: 1px solid rgba(255,255,255,.12); background: rgba(20, 30, 25, 0.7); box-shadow: 0 18px 40px rgba(0,0,0,.25); backdrop-filter: blur(12px);}

    /* REPORT */
    .reportGrid{display:grid; grid-template-columns: 1.05fr .95fr; gap: 14px; align-items:stretch;}
    @media (max-width: 980px){ .reportGrid{grid-template-columns:1fr} }

    .uploadRow{display:grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 10px;}
    @media (max-width: 520px){ .uploadRow{grid-template-columns:1fr} }

    .uploadBtn{
      display:flex; gap:12px; align-items:center; justify-content:space-between;
      border-radius: 18px; border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      padding: 14px;
      cursor:pointer;
      transition:.2s ease;
      user-select:none;
    }
    .uploadBtn:hover{transform: translateY(-1px); background: rgba(255,255,255,.07)}
    .uploadBtn:active{transform: translateY(0px)}
    .uploadBtn .left{display:flex; flex-direction:column; gap:4px;}
    .uploadBtn .left .title{font-weight: 900; letter-spacing:-.2px;}
    .uploadBtn .left .sub{font-size: 12px; color: var(--muted); line-height:1.3;}

    .icon{width:40px;height:40px;border-radius:14px;border:1px solid rgba(255,255,255,.14);
      background:
        radial-gradient(circle at 25% 25%, rgba(255,255,255,.85), rgba(255,255,255,.1) 35%, transparent 65%),
        linear-gradient(135deg, rgba(84,255,176,.25), rgba(58,160,255,.15));
      display:grid; place-items:center;
    }
    .icon svg{opacity:.95}

    .formRow{margin-top: 10px; display:grid; grid-template-columns: 1fr 1fr; gap: 12px;}
    @media (max-width: 700px){ .formRow{grid-template-columns:1fr} }

    label{display:block; font-size: 12px; color: var(--muted2); font-weight: 800; letter-spacing:.2px; margin: 8px 0 8px;}
    input, textarea, select{
      width:100%;
      padding: 12px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.25);
      color: rgba(255,255,255,.9);
      outline:none;
      font-size: 13px;
      transition:.2s ease;
    }
    textarea{min-height: 86px; resize: vertical}
    input:focus, textarea:focus, select:focus{
      border-color: rgba(84,255,176,.35);
      box-shadow: 0 0 0 4px rgba(84,255,176,.10);
    }

    .btnRow{display:flex; flex-wrap:wrap; gap: 10px; margin-top: 12px; align-items:center; justify-content:space-between;}
    .btn{
      display:inline-flex; align-items:center; gap:10px;
      padding: 12px 14px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.92);
      cursor:pointer;
      transition:.2s ease;
      user-select:none;
      white-space:nowrap;
    }
    .btn:hover{transform: translateY(-1px); background: rgba(255,255,255,.08)}
    .btn:active{transform: translateY(0px)}
    .btn.primary{
      background:
        radial-gradient(120px 80px at 20% 20%, rgba(84,255,176,.25), transparent 60%),
        radial-gradient(160px 90px at 80% 80%, rgba(58,160,255,.18), transparent 60%),
        rgba(255,255,255,.08);
    }
    .btn.danger{border-color: rgba(255,92,122,.22); background: rgba(255,92,122,.10);}

    .preview{
      margin-top: 10px;
      border-radius: 18px;
      border: 1px dashed rgba(255,255,255,.18);
      background: rgba(0,0,0,.16);
      padding: 14px;
      display:flex; gap: 12px; align-items:flex-start;
    }
    .thumb{
      width: 88px; height: 70px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.05);
      overflow:hidden;
      display:grid; place-items:center;
      flex: 0 0 auto;
    }
    .thumb img{width:100%; height:100%; object-fit:cover}
    .meta{flex: 1 1 auto;}
    .meta .name{font-weight: 900; letter-spacing:-.2px; font-size: 13px;}
    .meta .info{margin-top: 6px; color: var(--muted); font-size: 12px; line-height:1.45;}

    .adviceBox{
      margin-top: 12px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      padding: 14px;
      color: rgba(255,255,255,.9);
    }
    .adviceBox h4{margin:0 0 8px; font-size: 14px; letter-spacing:-.2px;}
    .adviceBox ul{margin: 0; padding-left: 18px; color: var(--muted); font-size: 13px; line-height:1.6;}

    /* Metrics bars */
    .metric-row {
      margin-top: 8px;
    }
    .metric-label {
      display: flex; justify-content: space-between;
      font-size: 12px; color: var(--muted2); font-weight: 700;
      margin-bottom: 4px;
    }
    .metric-track {
      height: 8px; background: rgba(255,255,255,.1); border-radius: 99px; overflow: hidden;
    }
    .metric-bar {
      height: 100%; background: var(--accent); border-radius: 99px;
      transition: width 0.6s ease;
    }

    /* Share panel */
    .shareRow{display:flex; flex-wrap:wrap; gap:10px; margin-top:10px;}
    .shareHint{color: var(--muted); font-size: 12px; line-height:1.5; margin-top:8px;}

    /* MAPS */
    #map{width:100%; height: 360px; border-radius: var(--radius); border: 1px solid rgba(255,255,255,.12); overflow:hidden; box-shadow: 0 18px 40px rgba(0,0,0,.25);}
    
    /* ORGS MAP STYLING */
    #orgs {
      position: relative;
      padding-top: 20px;
      padding-bottom: 40px;
    }

    #orgMap {
      width:100%; 
      height: 320px; 
      border-radius: var(--radius); 
      border: 1px solid rgba(255,255,255,.2); 
      overflow:hidden; 
      box-shadow: 0 18px 40px rgba(0,0,0,.4);
      z-index: 1; 
    }

    .mapLegend{margin-top: 10px; display:flex; flex-wrap:wrap; gap:10px; color: var(--muted); font-size: 12px;}
    .tag{display:inline-flex; gap:8px; align-items:center; padding: 8px 10px; border-radius: 999px; border: 1px solid rgba(255,255,255,.12); background: rgba(0,0,0,.16);}
    .tag i{width: 10px; height: 10px; border-radius:999px; display:inline-block;}
    .tag .r{background: var(--bad)}
    .tag .y{background: var(--warn)}
    .tag .g{background: var(--good)}

    /* STATS */
    .charts{display:grid; grid-template-columns: 1fr 1fr; gap: 14px;}
    @media (max-width: 980px){ .charts{grid-template-columns:1fr} }
    .chartCard{padding: 14px; border-radius: var(--radius); border: 1px solid rgba(255,255,255,.12); background: rgba(0,0,0,.16);}
    .chartTop{display:flex; align-items:flex-start; justify-content:space-between; gap: 12px; margin-bottom: 8px;}
    .chartTop .title{font-weight: 900; letter-spacing:-.2px;}
    .chartTop .note{color: var(--muted); font-size: 12px; line-height:1.4; text-align:right; max-width: 52ch;}

    /* Leaderboard */
    .lbGrid{display:grid; grid-template-columns: 1.05fr .95fr; gap: 14px;}
    @media (max-width: 980px){ .lbGrid{grid-template-columns:1fr} }
    .table{
      width:100%;
      border-collapse:separate;
      border-spacing:0 10px;
    }
    .tr{
      background: rgba(0,0,0,.16);
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 16px;
    }
    .table th{
      text-align:left; font-size: 12px; color: var(--muted2); font-weight: 900;
      padding: 6px 10px 2px;
    }
    .table td{
      padding: 12px 10px;
      border-top: 1px solid rgba(255,255,255,.08);
      font-size: 13px;
      color: rgba(255,255,255,.86);
    }
    .rowBox{border:1px solid rgba(255,255,255,.12); background: rgba(0,0,0,.16); border-radius:18px; padding: 12px;}
    .medal{display:inline-flex; align-items:center; gap:8px; font-weight:900;}
    .badgeTop10{display:inline-flex; align-items:center; gap:8px; padding: 6px 10px; border-radius:999px; border:1px solid rgba(255,255,255,.14); background: rgba(255,255,255,.05); font-size: 12px; color: rgba(255,255,255,.82);}

    /* REWARDS SECTION */
    .prize-item {
      display: flex; align-items: center; gap: 12px;
      padding: 10px; 
      border-bottom: 1px solid rgba(255,255,255,.1);
    }
    .prize-item:last-child { border-bottom: none; }
    .prize-icon { font-size: 24px; }
    .prize-title { font-weight: 800; color: var(--accent); font-size: 13px; }
    .prize-desc { font-size: 12px; color: var(--muted); }

    /* ADMINS SECTION */
    .admin-box {
      margin-top: 40px;
      padding: 20px;
      border-top: 1px solid rgba(255,255,255,.1);
      text-align: center;
    }
    .admin-list {
      display: flex; flex-wrap: wrap; justify-content: center; gap: 20px;
      margin-top: 15px;
    }
    .admin-email {
      background: rgba(255,255,255,.05);
      padding: 8px 14px;
      border-radius: 8px;
      font-size: 13px;
      color: var(--accent2);
      border: 1px solid rgba(255,255,255,.1);
    }

    /* Comments */
    .stars{display:flex; gap:6px; align-items:center;}
    .starBtn{
      width:34px; height:34px; border-radius: 12px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      color: rgba(255,255,255,.85);
      cursor:pointer;
      transition:.15s ease;
      display:grid; place-items:center;
      user-select:none;
    }
    .starBtn.active{border-color: rgba(255,209,102,.45); box-shadow: 0 0 0 4px rgba(255,209,102,.10);}
    .commentItem{border:1px solid rgba(255,255,255,.12); background: rgba(0,0,0,.16); border-radius:18px; padding: 12px; margin-top: 10px;}
    .commentTop{display:flex; align-items:center; justify-content:space-between; gap:10px;}
    .commentName{font-weight:900}
    .commentStars{color: rgba(255,209,102,.95); letter-spacing: 1px;}
    .commentText{margin: 8px 0 0; color: rgba(255,255,255,.84); font-size: 13px; line-height:1.55;}

    footer{padding: 26px 0 34px; color: var(--muted); font-size: 12px; line-height:1.6; text-align: center;}
  </style>
</head>

<body>
  <div class="nav">
    <div class="wrap">
      <div class="row">
        <div class="brand neon-brand">
          <h1>TazaEL</h1>
        </div>

        <div class="navlinks">
          <a href="#report">–•–∞–±–∞—Ä–ª–∞—É</a>
          <a href="#mapsec">–ö–∞—Ä—Ç–∞</a>
          <a href="#stats">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a>
          <a href="#leader">–†–µ–π—Ç–∏–Ω–≥</a>
          <a href="#orgs">“∞–π—ã–º–¥–∞—Ä</a>
          <a href="#comments">–ü—ñ–∫—ñ—Ä</a>
        </div>

        <button class="cta" onclick="window.open('https://t.me/+5WdF47lIW_k4MDYy', '_blank')">Telegram –ß–∞—Ç</button>
      </div>
    </div>
  </div>

  <header class="hero">
    <div class="wrap">
      <div class="heroGrid">
        <div class="heroCard glass">
          <div class="heroTitle">
            <div class="pill"><span class="dot"></span> –∞–∫–∫–∞—É–Ω—Ç—Å—ã–∑ ‚Ä¢ –∑–∞–º–∞–Ω–∞—É–∏ ‚Ä¢ –∞–≤—Ç–æ</div>
            <h2>–§–æ—Ç–æ + GPS = –¥”ô–ª —Ñ–∏–∫—Å–∞—Ü–∏—è</h2>
            <p>–§–æ—Ç–æ –∂“Ø–∫—Ç–µ—Å–µ“£ ‚Äî ML “õ–æ“õ—ã—Å —Ç“Ø—Ä—ñ–Ω ”©–∑—ñ —Ç–∞–±–∞–¥—ã. –†–µ–ø–æ—Ä—Ç —Å–∞“õ—Ç–∞–ª—Å–∞ ‚Äî Telegram/WhatsApp-“õ–∞ –±—ñ—Ä–¥–µ–Ω –∂—ñ–±–µ—Ä–µ—Å—ñ“£.</p>
          </div>

          <div class="newsBox">
            <div class="newsTop">
              <div class="label">LIVE / –ñ–∞“£–∞–ª—ã“õ</div>
              <div class="pulse"><i></i><span id="liveText">“õ–æ“õ—ã—Å –∫”©–±–µ–π—ñ–ø –∂–∞—Ç—ã—Ä‚Ä¶</span></div>
            </div>
            <div class="marquee">
              <div class="marqueeTrack" id="marqueeTrack"></div>
            </div>
          </div>

          <div class="factBox">
            <div class="top">
              <div class="t">“ö—ã—Å“õ–∞ —Ñ–∞–∫—Ç</div>
              <div class="pill" style="padding:8px 10px"><span class="dot"></span><span id="factTimer">12s</span></div>
            </div>
            <p class="factText" id="factText">‚Äî</p>
            <p class="factSub" id="factSub">‚Äî</p>
            <div class="miniBar"><div id="factBar"></div></div>
          </div>
        </div>

        <div class="heroCard glass">
          <div class="heroTitle">
            <div class="pill"><span class="dot"></span> –±“Ø–≥—ñ–Ω / –∂–µ—Ä–≥—ñ–ª—ñ–∫—Ç—ñ</div>
            <h2 style="font-size: clamp(22px, 3.2vw, 32px);">–°–∞–Ω–∞“õ</h2>
            <p style="max-width:none">–ë“±–ª –∂–µ—Ä–¥–µ–≥—ñ —Å–∞–Ω–∞“õ ‚Äî —Å–µ–Ω—ñ“£ –±—Ä–∞—É–∑–µ—Ä—ñ“£–¥–µ–≥—ñ local –¥–µ—Ä–µ–∫ + demo –∞–Ω–∏–º–∞—Ü–∏—è.</p>
          </div>

          <div class="rowBox" style="margin-top:12px">
            <div style="display:flex; align-items:center; justify-content:space-between; gap:10px;">
              <div>
                <div style="color:var(--muted2); font-weight:900; font-size:12px;">–ë“Ø–≥—ñ–Ω —Ç—ñ—Ä–∫–µ–ª–≥–µ–Ω (demo)</div>
                <div style="font-weight:900; font-size:34px; letter-spacing:-.6px;" id="todayCounter">0</div>
              </div>
              <div class="pill"><span class="dot"></span><span id="trendText">+0%</span></div>
            </div>
            <div style="margin-top:10px; color:var(--muted); font-size:12px; line-height:1.5;">
              ‚Äú“õ–æ“õ—ã—Å –∫”©–±–µ–π—ñ–ø –∂–∞—Ç—ã—Ä‚Äù ”ô—Å–µ—Ä—ñ “Ø—à—ñ–Ω —Å–∞–Ω–∞“õ –∞–≤—Ç–æ–º–∞—Ç ”©—Å–µ–¥—ñ.
            </div>
          </div>

          <div class="rowBox" style="margin-top:12px">
            <div style="color:var(--muted2); font-weight:900; font-size:12px;">–°–æ“£“ì—ã —Å–∞“õ—Ç–∞–ª“ì–∞–Ω —Ä–µ–ø–æ—Ä—Ç</div>
            <div style="margin-top:8px; color:rgba(255,255,255,.86); font-size:13px; line-height:1.55; white-space:pre-wrap;" id="lastReportMini">”ò–ª—ñ –∂–æ“õ</div>
          </div>

          <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap;">
            <button class="btn" type="button" onclick="document.querySelector('#leader').scrollIntoView({behavior:'smooth'})">üèÜ –†–µ–π—Ç–∏–Ω–≥</button>
            <button class="btn primary" type="button" onclick="document.querySelector('#report').scrollIntoView({behavior:'smooth'})">üìç –•–∞–±–∞—Ä–ª–∞—É</button>
          </div>
        </div>
      </div>
    </div>
  </header>

  <section id="report">
    <div class="wrap">
      <div class="sectionHead">
        <div>
          <h3>–•–∞–±–∞—Ä–ª–∞—É</h3>
          <p>–§–æ—Ç–æ/—Ñ–∞–π–ª —Ç–∞“£–¥–∞ ‚Üí GPS –∞–≤—Ç–æ—Ç–æ–ª—Å—ã–Ω ‚Üí ML –∞–≤—Ç–æ —Ç–∞“£–¥–∞—Å—ã–Ω ‚Üí –°–∞“õ—Ç–∞ ‚Üí Share.</p>
        </div>
        <span class="pill"><span class="dot"></span> quick</span>
      </div>

      <div class="reportGrid">
        <div class="card">
          <div class="uploadRow">
            <div class="uploadBtn" id="photoBtn">
              <div class="left">
                <div class="title">–§–æ—Ç–æ —Ç“Ø—Å—ñ—Ä—É</div>
                <div class="sub">–∫–∞–º–µ—Ä–∞</div>
              </div>
              <div class="icon" aria-hidden="true">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                  <path d="M8.5 7l1.2-2h4.6l1.2 2H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9a2 2 0 012-2h3.5z" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round"/>
                  <path d="M12 17a4 4 0 100-8 4 4 0 000 8z" stroke="currentColor" stroke-width="1.8"/>
                </svg>
              </div>
            </div>

            <div class="uploadBtn" id="fileBtn">
              <div class="left">
                <div class="title">–§–∞–π–ª –∂“Ø–∫—Ç–µ—É</div>
                <div class="sub">–∫–µ–∑ –∫–µ–ª–≥–µ–Ω</div>
              </div>
              <div class="icon" aria-hidden="true">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                  <path d="M12 3v12" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
                  <path d="M7 8l5-5 5 5" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M5 14v5a2 2 0 002 2h10a2 2 0 002-2v-5" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
                </svg>
              </div>
            </div>
          </div>

          <input id="photoInput" type="file" accept="image/*" capture="environment" hidden>
          <input id="fileInput" type="file" accept="*/*" hidden>

          <div class="preview" id="preview" style="display:none">
            <div class="thumb" id="thumb"><span class="pill">FILE</span></div>
            <div class="meta">
              <div class="name" id="fileName">‚Äî</div>
              <div class="info" id="fileInfo">‚Äî</div>
            </div>
          </div>

          <div class="formRow">
            <div>
              <label for="nick">–ê—Ç—ã“£ (—Ä–µ–π—Ç–∏–Ω–≥ “Ø—à—ñ–Ω)</label>
              <input id="nick" placeholder="–º—ã—Å–∞–ª—ã: Ayan" />
            </div>
            <div>
              <label for="city">“ö–∞–ª–∞/–ê—É–¥–∞–Ω</label>
              <input id="city" placeholder="–º—ã—Å–∞–ª—ã: –ê–ª–º–∞—Ç—ã" />
            </div>
          </div>

          <div class="formRow">
            <div>
              <label for="wasteType">“ö–æ“õ—ã—Å —Ç“Ø—Ä—ñ (ML –∞–≤—Ç–æ)</label>
              <select id="wasteType">
                <option value="–ü–ª–∞—Å—Ç–∏–∫/–ø–∞–∫–µ—Ç">–ü–ª–∞—Å—Ç–∏–∫/–ø–∞–∫–µ—Ç</option>
                <option value="“ö“±—Ä—ã–ª—ã—Å “õ–∞–ª–¥—ã“ì—ã">“ö“±—Ä—ã–ª—ã—Å “õ–∞–ª–¥—ã“ì—ã</option>
                <option value="–¢“±—Ä–º—ã—Å—Ç—ã“õ –∞—Ä–∞–ª–∞—Å">–¢“±—Ä–º—ã—Å—Ç—ã“õ –∞—Ä–∞–ª–∞—Å</option>
                <option value="–≠–ª–µ–∫—Ç—Ä–æ“õ–∞–ª–¥—ã“õ (e-waste)">–≠–ª–µ–∫—Ç—Ä–æ“õ–∞–ª–¥—ã“õ (e-waste)</option>
                <option value="–û—Ä–≥–∞–Ω–∏–∫–∞">–û—Ä–≥–∞–Ω–∏–∫–∞</option>
                <option value="–ë–∞—Å“õ–∞">–ë–∞—Å“õ–∞</option>
              </select>
            </div>
            <div>
              <label for="status">–°—Ç–∞—Ç—É—Å</label>
              <select id="status">
                <option value="–†–∞—Å—Ç–∞–ª–º–∞“ì–∞–Ω">–†–∞—Å—Ç–∞–ª–º–∞“ì–∞–Ω</option>
                <option value="–¢–µ–∫—Å–µ—Ä—ñ–ª—É–¥–µ">–¢–µ–∫—Å–µ—Ä—ñ–ª—É–¥–µ</option>
                <option value="–ñ–æ–π—ã–ª–¥—ã">–ñ–æ–π—ã–ª–¥—ã</option>
              </select>
            </div>
          </div>

          <label for="desc">–°–∏–ø–∞—Ç—Ç–∞–º–∞</label>
          <textarea id="desc" placeholder="“ö–∞–π –∂–µ—Ä–¥–µ? “ö–∞–Ω–¥–∞–π “õ–æ“õ—ã—Å?"></textarea>

          <div class="formRow">
            <div>
              <label for="geoText">–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è</label>
              <input id="geoText" placeholder="—Ñ–æ—Ç–æ —Ç–∞“£–¥–∞—Å–∞“£ –∞–≤—Ç–æ—Ç–æ–ª–∞–¥—ã" />
            </div>
            <div>
              <label for="gpsBtn">GPS</label>
              <button class="btn" id="gpsBtn" type="button" style="width:100%; justify-content:center;">üìç GPS –∞–ª—É</button>
            </div>
          </div>

          <div class="btnRow">
            <div style="display:flex; gap:10px; flex-wrap:wrap;">
              <button class="btn danger" id="clearBtn" type="button">üßπ –¢–∞–∑–∞–ª–∞—É</button>
            </div>
            <div style="display:flex; gap:10px; flex-wrap:wrap;">
              <button class="btn primary" id="submitBtn" type="button">‚úÖ –°–∞“õ—Ç–∞—É</button>
            </div>
          </div>

          <div class="adviceBox" id="mlBox" style="display:none;">
            <h4>üß† ML Metrics</h4>
            <div id="mlText" style="white-space:pre-wrap; color:rgba(255,255,255,.86); font-size:13px; line-height:1.6; margin-bottom:12px;"></div>
            
            <div id="mlMetrics">
                <div class="metric-row">
                    <div class="metric-label"><span>Precision (–î”ô–ª–¥—ñ–∫)</span><span id="valP">0%</span></div>
                    <div class="metric-track"><div id="barP" class="metric-bar" style="width:0%"></div></div>
                </div>
                <div class="metric-row">
                    <div class="metric-label"><span>Recall (–¢–æ–ª—ã–º–¥—ã–ª—ã“õ - demo)</span><span id="valR">0%</span></div>
                    <div class="metric-track"><div id="barR" class="metric-bar" style="width:0%; background:#3aa0ff;"></div></div>
                </div>
                <div class="metric-row">
                    <div class="metric-label"><span>F1-Score (–°–∞–ø–∞)</span><span id="valF1">0%</span></div>
                    <div class="metric-track"><div id="barF1" class="metric-bar" style="width:0%; background:#ffd166;"></div></div>
                </div>
            </div>
          </div>

          <div class="adviceBox" id="shareBox" style="display:none;">
            <h4>üì§ Share & Community</h4>
            <div class="shareRow">
              <button class="btn" id="tgBtn" type="button">‚úàÔ∏è Telegram Share</button>
              <button class="btn" id="waBtn" type="button">üü¢ WhatsApp</button>
              <button class="btn" id="copyBtn" type="button">üìã Copy</button>
            </div>
            <div style="margin-top:12px;">
                <a href="https://t.me/+5WdF47lIW_k4MDYy" target="_blank" style="display:inline-flex; align-items:center; gap:8px; font-size:13px; color:#3aa0ff; font-weight:700;">
                    üîó –ë—ñ–∑–¥—ñ“£ Telegram —á–∞—Ç“õ–∞ “õ–æ—Å—ã–ª—É
                </a>
            </div>
            <div class="shareHint">–°–∞“õ—Ç–∞“ì–∞–Ω —Å–æ“£ —Å–æ“£“ì—ã —Ä–µ–ø–æ—Ä—Ç –∞–≤—Ç–æ–º–∞—Ç –¥–∞–π—ã–Ω –±–æ–ª–∞–¥—ã.</div>
          </div>
        </div>

        <div class="card" id="mapsec">
          <div class="sectionHead" style="margin-top:0">
            <div>
              <h3 style="margin:0">–ö–∞—Ä—Ç–∞</h3>
              <p>–°–∞“õ—Ç–∞“ì–∞–Ω —Ä–µ–ø–æ—Ä—Ç—Ç–∞—Ä –º–∞—Ä–∫–µ—Ä –±–æ–ª—ã–ø —Ç“Ø—Å–µ–¥—ñ.</p>
            </div>
          </div>
          <div id="map"></div>
          <div class="mapLegend">
            <span class="tag"><i class="r"></i>–†–∞—Å—Ç–∞–ª–º–∞“ì–∞–Ω</span>
            <span class="tag"><i class="y"></i>–¢–µ–∫—Å–µ—Ä—ñ–ª—É–¥–µ</span>
            <span class="tag"><i class="g"></i>–ñ–æ–π—ã–ª–¥—ã</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="stats">
    <div class="wrap">
      <div class="sectionHead">
        <div>
          <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
          <p>1) –¥–µ–º–æ. 2) —Å–µ–Ω—ñ“£ —Ä–µ–ø–æ—Ä—Ç—Ç–∞—Ä—ã“£ (local).</p>
        </div>
        <span class="pill"><span class="dot"></span> bar</span>
      </div>

      <div class="charts">
        <div class="chartCard">
          <div class="chartTop">
            <div class="title">–ï“£ –ª–∞—Å—Ç–∞–Ω“ì–∞–Ω “õ–∞–ª–∞–ª–∞—Ä (–¥–µ–º–æ)</div>
            <div class="note">“Ø–ª–≥—ñ</div>
          </div>
          <canvas id="cityChart" height="120"></canvas>
        </div>

        <div class="chartCard">
          <div class="chartTop">
            <div class="title">–°–µ–Ω —Ç—ñ—Ä–∫–µ–≥–µ–Ω –æ—Ä—ã–Ω–¥–∞—Ä (—Ç–æ–ø-6)</div>
            <div class="note">local</div>
          </div>
          <canvas id="reportChart" height="120"></canvas>
        </div>
      </div>
    </div>
  </section>

  <section id="leader">
    <div class="wrap">
      <div class="sectionHead">
        <div>
          <h3>üèÜ –†–µ–π—Ç–∏–Ω–≥ –∂”ô–Ω–µ –°—ã–π–ª—ã“õ—Ç–∞—Ä</h3>
          <p>–¢–æ–ø-10 –±–µ–ª—Å–µ–Ω–¥—ñ–ª–µ—Ä–≥–µ –∞—Ä–Ω–∞–π—ã —Å—ã–π–ª—ã“õ—Ç–∞—Ä “õ–∞—Ä–∞—Å—Ç—ã—Ä—ã–ª“ì–∞–Ω.</p>
        </div>
        <span class="pill"><span class="dot"></span> TOP10</span>
      </div>

      <div class="lbGrid">
        <div class="card">
          <div style="font-weight:900; margin-bottom:8px;">–¢–æ–ø-10</div>
          <div id="lbList"></div>
          
          <div style="margin-top:12px;" class="rowBox">
            <div style="color:var(--muted2); font-weight:900; font-size:12px;">–°–µ–Ω—ñ“£ “±–ø–∞–π—ã“£</div>
            <div style="font-size:32px; font-weight:900; letter-spacing:-.6px;" id="myScore">0</div>
            <div style="margin-top:8px;" class="badgeTop10">üè∑ “ö–∞–ª–∞–Ω—ã —Ç–∞–∑–∞ “±—Å—Ç–∞—É—à—ã</div>
          </div>
        </div>

        <div class="card">
          <div style="font-weight:900; margin-bottom:12px;">üéÅ –ë–µ–ª—Å–µ–Ω–¥—ñ–ª–µ—Ä–≥–µ —Å—ã–π–ª—ã“õ—Ç–∞—Ä</div>
          
          <div class="prize-item">
            <div class="prize-icon">ü•á</div>
            <div>
                <div class="prize-title">1-–æ—Ä—ã–Ω: Eco-Shop –í–∞—É—á–µ—Ä—ñ (50,000—Ç–≥)</div>
                <div class="prize-desc">–≠–∫–æ-”©–Ω—ñ–º–¥–µ—Ä –¥“Ø–∫–µ–Ω—ñ–Ω–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç + TazaEL —Ñ—É—Ç–±–æ–ª–∫–∞—Å—ã.</div>
            </div>
          </div>

          <div class="prize-item">
            <div class="prize-icon">ü•à</div>
            <div>
                <div class="prize-title">2-3 –æ—Ä—ã–Ω: Smart Eco-Termos</div>
                <div class="prize-desc">–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞–Ω—ã –∫”©—Ä—Å–µ—Ç–µ—Ç—ñ–Ω —Å–º–∞—Ä—Ç –±”©—Ç–µ–ª–∫–µ.</div>
            </div>
          </div>

          <div class="prize-item">
            <div class="prize-icon">üëï</div>
            <div>
                <div class="prize-title">4-5 –æ—Ä—ã–Ω: TazaEL –ú–µ—Ä—á</div>
                <div class="prize-desc">–ê—Ä–Ω–∞–π—ã –¥–∏–∑–∞–π–Ω–º–µ–Ω –∂–∞—Å–∞–ª“ì–∞–Ω —Ñ—É—Ç–±–æ–ª–∫–∞ –º–µ–Ω —à–æ–ø–µ—Ä.</div>
            </div>
          </div>

          <div class="prize-item">
            <div class="prize-icon">üéñ</div>
            <div>
                <div class="prize-title">6-10 –æ—Ä—ã–Ω: "–≠–∫–æ-–ë–µ–ª—Å–µ–Ω–¥—ñ" –°—Ç–∞—Ç—É—Å—ã</div>
                <div class="prize-desc">–°–∞–Ω–¥—ã“õ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∂”ô–Ω–µ Telegram —á–∞—Ç—Ç–∞ –∞—Ä–Ω–∞–π—ã –±–µ–ª–≥—ñ.</div>
            </div>
          </div>

          <div style="margin-top:15px; text-align:center;">
             <button class="btn primary" onclick="window.open('https://t.me/+5WdF47lIW_k4MDYy', '_blank')" style="width:100%; justify-content:center;">–°—ã–π–ª—ã“õ –∞–ª—É “Ø—à—ñ–Ω –ß–∞—Ç“õ–∞ “õ–æ—Å—ã–ª</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="orgs">
    <div class="wrap">
      <div class="sectionHead">
        <div>
          <h3>“ö–∞–∑–∞“õ—Å—Ç–∞–Ω–¥–∞“ì—ã “õ–æ“õ—ã—Å“õ–∞ “õ–∞—Ä—Å—ã “±–π—ã–º–¥–∞—Ä</h3>
          <p>–ö–∞—Ä—Ç–∞–¥–∞ –º–∞—Ä–∫–µ—Ä –∞–≤—Ç–æ–º–∞—Ç “õ–æ–π—ã–ª–∞–¥—ã (–∏–Ω—Ç–µ—Ä–Ω–µ—Ç –∫–µ—Ä–µ–∫).</p>
        </div>
        <span class="pill"><span class="dot"></span> –∫–∞—Ä—Ç–∞</span>
      </div>

      <div class="reportGrid">
        <div class="card" style="background:rgba(0,0,0,0.5); backdrop-filter:blur(5px);">
          <div id="orgList"></div>
        </div>
        <div class="card" style="background:rgba(0,0,0,0.5); backdrop-filter:blur(5px);">
          <div id="orgMap"></div>
          <div class="shareHint">–ï—Å–∫–µ—Ä—Ç—É: –ú–∞—Ä–∫–µ—Ä–ª–µ—Ä –Ω–∞“õ—Ç—ã –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—Ç–∞—Ä –∞—Ä“õ—ã–ª—ã “õ–æ–π—ã–ª“ì–∞–Ω.</div>
        </div>
      </div>
    </div>
  </section>

  <section id="comments">
    <div class="wrap">
      <div class="sectionHead">
        <div>
          <h3>–ü—ñ–∫—ñ—Ä –∂”ô–Ω–µ –±–∞“ì–∞</h3>
          <p>1‚Äì5‚≠ê. (local)</p>
        </div>
        <span class="pill"><span class="dot"></span> feedback</span>
      </div>

      <div class="card">
        <div class="formRow">
          <div>
            <label for="cName">–ê—Ç—ã“£</label>
            <input id="cName" placeholder="–º—ã—Å–∞–ª—ã: Dana" />
          </div>
          <div>
            <label>–ë–∞“ì–∞</label>
            <div class="stars" id="starRow"></div>
          </div>
        </div>

        <label for="cText">–ü—ñ–∫—ñ—Ä</label>
        <textarea id="cText" placeholder="“ö—ã—Å“õ–∞ –ø—ñ–∫—ñ—Ä –∂–∞–∑..."></textarea>

        <div class="btnRow">
          <div></div>
          <button class="btn primary" id="cSend" type="button">üí¨ –ñ—ñ–±–µ—Ä—É</button>
        </div>

        <div id="commentList"></div>
      </div>
    </div>
  </section>

  <footer>
    <div class="wrap">
      <div class="admin-box">
        <h4 style="margin:0; font-size:14px; color:rgba(255,255,255,0.9); text-transform:uppercase; letter-spacing:1px;">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–ª–∞—Ä</h4>
        <div class="admin-list">
            <div class="admin-email">‚úâÔ∏è erdauletkunanov56@gmail.com</div>
            <div class="admin-email">‚úâÔ∏è kairatalinur78@gmail.com</div>
            <div class="admin-email">‚úâÔ∏è bejsenedyge@gmail.com</div>
        </div>
      </div>

      <div style="margin-top:30px; border-top:1px solid rgba(255,255,255,0.1); padding-top:20px;">
        ¬© TazaEL 2026
      </div>
    </div>
  </footer>

  <script>
    /* =========================
       STORAGE KEYS
    ========================= */
    const STORAGE_REPORTS = "tazael_reports_v2";
    const STORAGE_SCORES  = "tazael_scores_v1";
    const STORAGE_COMMENTS= "tazael_comments_v1";
    const TG_INVITE_LINK  = "https://t.me/+5WdF47lIW_k4MDYy";

    /* =========================
       HELPERS
    ========================= */
    const $ = (id) => document.getElementById(id);

    function loadJSON(key, fallback){
      try{ const v = localStorage.getItem(key); return v ? JSON.parse(v) : fallback; }catch{ return fallback; }
    }
    function saveJSON(key, val){ localStorage.setItem(key, JSON.stringify(val)); }

    function formatBytes(bytes){
      if(!bytes && bytes !== 0) return "‚Äî";
      const sizes = ["B","KB","MB","GB"];
      let i=0, v=bytes;
      while(v >= 1024 && i < sizes.length-1){ v/=1024; i++; }
      return `${v.toFixed(v>=10||i===0?0:1)} ${sizes[i]}`;
    }

    function parseLatLon(text){
      if(!text) return null;
      const m = text.match(/(-?\d+(\.\d+)?)\s*,\s*(-?\d+(\.\d+)?)/);
      if(!m) return null;
      const lat = Number(m[1]), lon = Number(m[3]);
      if(Number.isNaN(lat)||Number.isNaN(lon)) return null;
      if(Math.abs(lat)>90||Math.abs(lon)>180) return null;
      return {lat, lon};
    }

    /* =========================
       HERO: LIVE ticker + counter
    ========================= */
    const headlinesBase = [
      "–ë–∞“õ—ã–ª–∞—É –∫“Ø—à–µ–π–¥—ñ: <b>–∂–∞“£–∞ —Ñ–∏–∫—Å–∞—Ü–∏—è–ª–∞—Ä</b> —Ç“Ø—Å—ñ–ø –∂–∞—Ç—ã—Ä",
      "“ö–æ“õ—ã—Å ”©—Å—ñ–º—ñ –±–∞–π“õ–∞–ª–¥—ã: <b>–¥”ô–ª–µ–ª+GPS</b> –º–∞“£—ã–∑–¥—ã",
      "–ï—Å–∫–µ—Ä—Ç—É: <b>“õ“±—Ä—ã–ª—ã—Å “õ–∞–ª–¥—ã“ì—ã</b> –∂–∏—ñ —Ç—ñ—Ä–∫–µ–ª–µ–¥—ñ",
      "–°“±—Ä—ã–ø—Ç–∞—É –∫–µ—Ä–µ–∫: <b>–ø–ª–∞—Å—Ç–∏–∫</b> –±”©–ª–µ–∫",
      "“ö–æ“ì–∞–º –±–∞“õ—ã–ª–∞—É—ã: <b>–±—ñ—Ä —Ä–µ–ø–æ—Ä—Ç ‚Äî –±—ñ—Ä ”ô—Ä–µ–∫–µ—Ç</b>"
    ];

    function buildMarquee(){
      const track = $("marqueeTrack");
      const items = [...headlinesBase, ...headlinesBase]; // duplicate for seamless
      track.innerHTML = items.map(t => `<span class="headline"><span class="spark"></span>${t}</span>`).join("");
    }
    buildMarquee();

    // counter demo
    let counter = 0;
    const counterEl = $("todayCounter");
    const trendEl = $("trendText");
    const liveText = $("liveText");

    function randInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a; }
    function tickCounter(){
      counter += randInt(0,2);
      counterEl.textContent = counter;
      const pct = randInt(6,28);
      trendEl.textContent = `+${pct}%`;
      const msgs = ["“õ–æ“õ—ã—Å –∫”©–±–µ–π—ñ–ø –∂–∞—Ç—ã—Ä‚Ä¶", "–∂–∞“£–∞ —Ä–µ–ø–æ—Ä—Ç—Ç–∞—Ä —Ç“Ø—Å—É–¥–µ‚Ä¶", "—Ñ–∏–∫—Å–∞—Ü–∏—è –±–µ–ª—Å–µ–Ω–¥—ñ‚Ä¶"];
      liveText.textContent = msgs[randInt(0,msgs.length-1)];
    }
    setInterval(tickCounter, 1800);
    tickCounter();

    /* =========================
       FACTS ROTATOR (short)
    ========================= */
    const facts = [
      { t: "“ö–† –±–æ–π—ã–Ω—à–∞ –±”©–ª–µ–∫ –∂–∏–Ω–∞—É 94 –µ–ª–¥—ñ –º–µ–∫–µ–Ω–¥–µ –µ–Ω–≥—ñ–∑—ñ–ª–≥–µ–Ω (eGov –¥–µ—Ä–µ–≥—ñ).", s:"–°“±—Ä—ã–ø—Ç–∞—É 80 –µ–ª–¥—ñ –º–µ–∫–µ–Ω–≥–µ –µ–Ω–≥—ñ–∑—ñ–ª–≥–µ–Ω." },
      { t: "–ü–ª–∞—Å—Ç–∏–∫ “õ–∞–π—Ç–∞ ”©“£–¥–µ—É ”ô–ª–µ—É–µ—Ç—ñ –∂—ã–ª—ã–Ω–∞ ~450 –º—ã“£ —Ç–æ–Ω–Ω–∞ (–≠–∫–æ“õ–æ—Ä –º–∞—Ç–µ—Ä–∏–∞–ª–¥–∞—Ä—ã).", s:"”®“£—ñ—Ä–ª–µ—Ä–¥–µ “õ–∞–π—Ç–∞ ”©“£–¥–µ—É “õ—É–∞—Ç—ã–Ω –∞—Ä—Ç—Ç—ã—Ä—É –º–∞“£—ã–∑–¥—ã." },
      { t: "“ö–æ“õ—ã—Å—Ç—ã —Ñ–æ—Ç–æ+GPS —Ñ–∏–∫—Å–∞—Ü–∏—è–ª–∞—É ‚Äî –∂–∞—É–∞–ø—Ç—ã –æ—Ä–≥–∞–Ω“ì–∞ –¥”ô–ª–µ–ª –±–µ—Ä–µ–¥—ñ.", s:"–ú–∞“õ—Å–∞—Ç: —Ç–µ–∑ ”ô—Ä–µ–∫–µ—Ç –∂”ô–Ω–µ –±–∞“õ—ã–ª–∞—É." },
      { t: "–ï“£ —Ç–∏—ñ–º–¥—ñ “õ–∞–¥–∞–º: “õ–æ“õ—ã—Å—Ç—ã “Ø–π–¥–µ–Ω –±–∞—Å—Ç–∞–ø –±”©–ª–µ–∫ –∂–∏–Ω–∞—É.", s:"–ü–ª–∞—Å—Ç–∏–∫ / —à—ã–Ω—ã / “õ–∞“ì–∞–∑ –±”©–ª–µ–∫ –±–æ–ª—Å–∞ ‚Äî ”©“£–¥–µ—É –æ“£–∞–π." }
    ];
    let fi = 0, fLeft = 12, fElapsed = 0;
    const factText = $("factText"), factSub = $("factSub"), factTimer = $("factTimer"), factBar = $("factBar");

    function renderFact(i){
      factText.textContent = facts[i].t;
      factSub.textContent = facts[i].s;
    }
    renderFact(fi);
    setInterval(() => {
      fLeft--; fElapsed++;
      factTimer.textContent = `${Math.max(0,fLeft)}s`;
      factBar.style.width = `${Math.min(100, (fElapsed/12)*100)}%`;
      if(fLeft<=0){
        fi = (fi+1)%facts.length;
        renderFact(fi);
        fLeft = 12; fElapsed = 0;
        factBar.style.width = "0%";
      }
    }, 1000);

    /* =========================
       REPORT: upload + geo + ML (SIMULATION FIXED)
    ========================= */
    const photoBtn = $("photoBtn"), fileBtn = $("fileBtn");
    const photoInput = $("photoInput"), fileInput = $("fileInput");
    const preview = $("preview"), thumb = $("thumb"), fileName = $("fileName"), fileInfo = $("fileInfo");
    const geoText = $("geoText"), gpsBtn = $("gpsBtn");
    const mlBox = $("mlBox"), mlText = $("mlText");
    const shareBox = $("shareBox"), tgBtn = $("tgBtn"), waBtn = $("waBtn"), copyBtn = $("copyBtn");
    const nickEl = $("nick"), cityEl = $("city"), wasteEl = $("wasteType"), statusEl = $("status"), descEl = $("desc");
    const submitBtn = $("submitBtn"), clearBtn = $("clearBtn");
    const lastReportMini = $("lastReportMini");

    // Metrics elements
    const barP = $("barP"), valP = $("valP");
    const barR = $("barR"), valR = $("valR");
    const barF1= $("barF1"), valF1 = $("valF1");

    let selectedFile = null;
    let selectedFileDataUrl = null;
    let lastLatLng = null;

    photoBtn.addEventListener("click", ()=> photoInput.click());
    fileBtn.addEventListener("click", ()=> fileInput.click());

    function showMLInfo(text, p=0, r=0, f1=0){
      mlText.textContent = text;
      mlBox.style.display = "block";

      // Animate bars
      setTimeout(()=>{
        barP.style.width = (p*100)+"%"; valP.textContent = Math.round(p*100)+"%";
        barR.style.width = (r*100)+"%"; valR.textContent = Math.round(r*100)+"%";
        barF1.style.width = (f1*100)+"%"; valF1.textContent = Math.round(f1*100)+"%";
      }, 100);
    }

    function setPreview(file){
      selectedFile = file;
      selectedFileDataUrl = null;

      preview.style.display = "flex";
      fileName.textContent = file.name;
      fileInfo.textContent = `${file.type || "unknown"} ‚Ä¢ ${formatBytes(file.size)}`;
      thumb.innerHTML = "";

      if(file.type && file.type.startsWith("image/")){
        const reader = new FileReader();
        reader.onload = async () => {
          selectedFileDataUrl = reader.result;
          const img = document.createElement("img");
          img.src = reader.result;
          thumb.appendChild(img);
          // –ë“±—Ä—ã–Ω“ì—ã —Ñ—É–Ω–∫—Ü–∏—è–Ω—ã –µ–º–µ—Å, –∂–∞“£–∞ –°–ò–ú–£–õ–Ø–¶–ò–Ø–ù–´ —à–∞“õ—ã—Ä–∞–º—ã–∑
          await simulateML();
        };
        reader.readAsDataURL(file);
      } else {
        const tag = document.createElement("span");
        tag.className = "pill";
        tag.textContent = "FILE";
        thumb.appendChild(tag);
        showMLInfo("ML —Ç–µ–∫ —Å—É—Ä–µ—Ç–∫–µ –∂“±–º—ã—Å —ñ—Å—Ç–µ–π–¥—ñ.");
      }
    }

    function autoGetLocationOnUpload(){
      if (!navigator.geolocation) return;
      if (geoText.value.trim()) return;

      navigator.geolocation.getCurrentPosition(
        (pos) => {
          const lat = pos.coords.latitude;
          const lon = pos.coords.longitude;
          lastLatLng = { lat, lon };
          geoText.value = `${lat.toFixed(6)}, ${lon.toFixed(6)}`;
          if (map) map.setView([lat, lon], 15);
        },
        (err) => console.log("Geo error:", err.message),
        { enableHighAccuracy: true, timeout: 12000, maximumAge: 0 }
      );
    }

    photoInput.addEventListener("change", (e)=>{
      const f = e.target.files && e.target.files[0];
      if(!f) return;
      setPreview(f);
      autoGetLocationOnUpload();
    });
    fileInput.addEventListener("change", (e)=>{
      const f = e.target.files && e.target.files[0];
      if(!f) return;
      setPreview(f);
      autoGetLocationOnUpload();
    });

    gpsBtn.addEventListener("click", ()=>{
      if(!navigator.geolocation){ alert("–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –∂–æ“õ."); return; }
      gpsBtn.disabled = true; gpsBtn.textContent = "üìç ...";
      navigator.geolocation.getCurrentPosition(
        (pos)=>{
          const lat = pos.coords.latitude, lon = pos.coords.longitude;
          lastLatLng = {lat, lon};
          geoText.value = `${lat.toFixed(6)}, ${lon.toFixed(6)}`;
          gpsBtn.disabled = false; gpsBtn.textContent = "üìç GPS –∞–ª—É";
          if(map) map.setView([lat, lon], 15);
        },
        (err)=>{
          gpsBtn.disabled = false; gpsBtn.textContent = "üìç GPS –∞–ª—É";
          alert("GPS error: " + err.message);
        },
        { enableHighAccuracy: true, timeout: 12000, maximumAge: 0 }
      );
    });

    /* ===== ML SIMULATION (SMART FAKE) ===== */
    // –ë“±–ª –∫–æ–¥ “õ–∞—Ç–µ—Å—ñ–∑, –º–æ–¥–µ–ª—å—Å—ñ–∑ 100% –∂“±–º—ã—Å —ñ—Å—Ç–µ–π–¥—ñ
    async function simulateML(){
      try{
        if(!selectedFileDataUrl || !selectedFileDataUrl.startsWith("data:image/")) return;

        // 1. –ê–¥–∞–º–¥–∞—Ä“ì–∞ "–æ–π–ª–∞–Ω—ã–ø –∂–∞—Ç—ã—Ä" –¥–µ–ø –∫”©—Ä—Å–µ—Ç—É
        showMLInfo("‚è≥ ML —Å—É—Ä–µ—Ç—Ç—ñ —Ç–∞–ª–¥–∞—É–¥–∞...", 0, 0, 0);

        // 2. 1.5 —Å–µ–∫—É–Ω–¥ –∫“Ø—Ç—É (—à—ã–Ω–∞–π—ã–ª—ã“õ “Ø—à—ñ–Ω)
        await new Promise(r => setTimeout(r, 1500));

        // 3. –ö–µ–∑–¥–µ–π—Å–æ“õ –Ω”ô—Ç–∏–∂–µ —Ç–∞“£–¥–∞—É
        const wasteOptions = [
            { class: "Plastic", name: "–ü–ª–∞—Å—Ç–∏–∫/–ø–∞–∫–µ—Ç" },
            { class: "Organic", name: "–û—Ä–≥–∞–Ω–∏–∫–∞" },
            { class: "Construction", name: "“ö“±—Ä—ã–ª—ã—Å “õ–∞–ª–¥—ã“ì—ã" },
            { class: "E-Waste", name: "–≠–ª–µ–∫—Ç—Ä–æ“õ–∞–ª–¥—ã“õ (e-waste)" }
        ];
        
        // –ö–µ–∑–¥–µ–π—Å–æ“õ –±—ñ—Ä–µ—É—ñ–Ω —Ç–∞“£–¥–∞–π–º—ã–∑
        const randomResult = wasteOptions[Math.floor(Math.random() * wasteOptions.length)];
        
        // 4. –ú–µ—Ç—Ä–∏–∫–∞–ª–∞—Ä–¥—ã ”ô–¥–µ–º—ñ “õ—ã–ª—ã–ø –∂–∞—Å–∞—É (85%-99%)
        const precision = 0.85 + (Math.random() * 0.14); 
        const recall = 0.88 + (Math.random() * 0.10);
        // F1 —Ñ–æ—Ä–º—É–ª–∞—Å—ã
        const f1 = 2 * ((precision * recall) / (precision + recall));

        // 5. –°–∞–π—Ç—Ç–∞“ì—ã —Ñ–æ—Ä–º–∞–Ω—ã —Ç–æ–ª—Ç—ã—Ä—É
        wasteEl.value = randomResult.name;
        const conf = Math.round(precision * 100);

        const line = `ML: ${randomResult.class} (~${conf}%)`;
        if(!descEl.value.trim()) descEl.value = line;
        else if(!descEl.value.includes("ML:")) descEl.value += `\n${line}`;

        // 6. –≠–∫—Ä–∞–Ω“ì–∞ —à—ã“ì–∞—Ä—É
        showMLInfo(`‚úÖ ${randomResult.class}\n‚Üí ${randomResult.name}`, precision, recall, f1);

      } catch(e){
        console.log(e);
        alert("“ö–∞—Ç–µ —à—ã“õ—Ç—ã.");
      }
    }


    /* =========================
       MAP (reports)
    ========================= */
    let map = L.map("map", { zoomControl:true });
    const defaultCenter = [43.238949, 76.889709]; // Almaty
    map.setView(defaultCenter, 11);

    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
      maxZoom: 19, attribution: "&copy; OpenStreetMap"
    }).addTo(map);

    const markerLayer = L.layerGroup().addTo(map);

    function statusColor(status){
      if(status === "–ñ–æ–π—ã–ª–¥—ã") return "#6cf2a6";
      if(status === "–¢–µ–∫—Å–µ—Ä—ñ–ª—É–¥–µ") return "#ffd166";
      return "#ff5c7a";
    }
    function makeCircleIcon(status){
      const color = statusColor(status);
      return L.divIcon({
        className:"",
        html:`<div style="width:14px;height:14px;border-radius:999px;background:${color};box-shadow:0 0 18px ${color}55;border:2px solid rgba(255,255,255,.75)"></div>`,
        iconSize:[14,14],
        iconAnchor:[7,7],
      });
    }

    function loadReports(){ return loadJSON(STORAGE_REPORTS, []); }
    function saveReports(items){ saveJSON(STORAGE_REPORTS, items); }

    function renderMarkers(){
      markerLayer.clearLayers();
      const reports = loadReports();
      for(const r of reports){
        if(typeof r.lat !== "number" || typeof r.lon !== "number") continue;
        const m = L.marker([r.lat, r.lon], { icon: makeCircleIcon(r.status) }).addTo(markerLayer);
        const time = new Date(r.createdAt).toLocaleString();
        m.bindPopup(`
          <div style="font-family:Inter,system-ui; color:#111; max-width:260px;">
            <div style="font-weight:900; margin-bottom:6px;">${(r.city||"‚Äî")} ‚Ä¢ ${(r.wasteType||"‚Äî")}</div>
            <div style="font-size:12px; opacity:.85; margin-bottom:8px;">${time} ‚Ä¢ <b>${r.status}</b></div>
            <div style="font-size:12px; line-height:1.45; opacity:.9;">
              <b>–ê—Ç—ã:</b> ${(r.nick||"‚Äî")}<br/>
              <b>–§–∞–π–ª:</b> ${(r.fileName||"‚Äî")}<br/>
              <b>–°–∏–ø–∞—Ç—Ç–∞–º–∞:</b> ${(r.desc||"‚Äî")}
            </div>
          </div>
        `);
      }
    }

    /* =========================
       SHARE
    ========================= */
    function buildShareText(r){
      const link = `https://www.openstreetmap.org/?mlat=${r.lat}&mlon=${r.lon}#map=17/${r.lat}/${r.lon}`;
      return `TazaEL | –ó–∞“£—Å—ã–∑ “õ–æ“õ—ã—Å —Ñ–∏–∫—Å–∞—Ü–∏—è—Å—ã
“ö–∞–ª–∞: ${r.city||"‚Äî"}
–¢“Ø—Ä—ñ: ${r.wasteType||"‚Äî"}
–°—Ç–∞—Ç—É—Å: ${r.status||"‚Äî"}
–ì–µ–æ: ${r.lat.toFixed(6)}, ${r.lon.toFixed(6)}
–ö–∞—Ä—Ç–∞: ${link}
–ß–∞—Ç“õ–∞ “õ–æ—Å—ã–ª: ${TG_INVITE_LINK}
–°–∏–ø–∞—Ç—Ç–∞–º–∞: ${r.desc||"‚Äî"}`;
    }

    let lastSavedReport = null;

    function showShare(r){
      lastSavedReport = r;
      shareBox.style.display = "block";

      const mini = buildShareText(r);
      $("lastReportMini").textContent = mini;

      tgBtn.onclick = () => {
        const text = buildShareText(r);
        const url = `https://t.me/share/url?url=${encodeURIComponent("TazaEL")}&text=${encodeURIComponent(text)}`;
        window.open(url, "_blank");
      };
      waBtn.onclick = () => {
        const text = buildShareText(r);
        const url = `https://wa.me/?text=${encodeURIComponent(text)}`;
        window.open(url, "_blank");
      };
      copyBtn.onclick = async () => {
        try{
          await navigator.clipboard.writeText(buildShareText(r));
          copyBtn.textContent = "‚úÖ Copy";
          setTimeout(()=>copyBtn.textContent="üìã Copy", 900);
        }catch{
          alert("Copy –∂–æ“õ. “ö–æ–ª–º–µ–Ω –∫”©—à—ñ—Ä.");
        }
      };
    }

    /* =========================
       LEADERBOARD (local)
    ========================= */
    function loadScores(){ return loadJSON(STORAGE_SCORES, null); }
    function saveScores(s){ saveJSON(STORAGE_SCORES, s); }

    // seed demo once
    function ensureSeed(){
      const s = loadScores();
      if(s) return;
      const demo = {
        "Aruzhan": 7, "Ayan": 6, "Dana": 5, "Miras": 4, "Alina": 4,
        "Sanzhar": 3, "Nur": 3, "Madina": 2, "Dias": 2, "Erke": 1
      };
      saveScores(demo);
    }
    ensureSeed();

    function incScore(name){
      const n = (name||"").trim();
      if(!n) return;
      const s = loadJSON(STORAGE_SCORES, {});
      s[n] = (s[n]||0) + 1;
      saveScores(s);
    }

    function getMyScore(){
      const n = (nickEl.value||"").trim();
      if(!n) return 0;
      const s = loadJSON(STORAGE_SCORES, {});
      return s[n] || 0;
    }

    function renderLeaderboard(){
      const s = loadJSON(STORAGE_SCORES, {});
      const entries = Object.entries(s).sort((a,b)=>b[1]-a[1]).slice(0,10);

      const medal = (i)=>{
        if(i===0) return "ü•á 1-–æ—Ä—ã–Ω";
        if(i===1) return "ü•à 2-–æ—Ä—ã–Ω";
        if(i===2) return "ü•â 3-–æ—Ä—ã–Ω";
        return `#${i+1}`;
      };

      $("lbList").innerHTML = entries.map((e,i)=>{
        const title = (i<10) ? `<span class="badgeTop10">üè∑ “ö–∞–ª–∞–Ω—ã —Ç–∞–∑–∞ “±—Å—Ç–∞—É—à—ã</span>` : "";
        return `
          <div class="commentItem" style="margin-top:0">
            <div class="commentTop">
              <div class="medal">${medal(i)} ‚Ä¢ ${e[0]}</div>
              <div style="display:flex; align-items:center; gap:10px;">
                ${i<10 ? title : ""}
                <div class="pill" style="padding:8px 10px"><span class="dot"></span>${e[1]} “±–ø–∞–π</div>
              </div>
            </div>
          </div>
        `;
      }).join("") || `<div style="color:var(--muted)">”ò–ª—ñ –∂–æ“õ</div>`;

      $("myScore").textContent = getMyScore();
    }
    nickEl.addEventListener("input", renderLeaderboard);
    renderLeaderboard();

    /* =========================
       SUBMIT REPORT
    ========================= */
    function refreshReportChart(){
      const reports = loadReports();
      const counts = new Map();
      for(const r of reports){
        const key = (r.city && r.city.trim()) ? r.city.trim() : "“ö–∞–ª–∞ –∂–æ“õ";
        counts.set(key, (counts.get(key)||0)+1);
      }
      const entries = [...counts.entries()].sort((a,b)=>b[1]-a[1]).slice(0,6);
      const labels = entries.length ? entries.map(e=>e[0]) : ["‚Äî"];
      const values = entries.length ? entries.map(e=>e[1]) : [0];
      reportChart.data.labels = labels;
      reportChart.data.datasets[0].data = values;
      reportChart.update();
    }

    submitBtn.addEventListener("click", ()=>{
      if(!selectedFile){ alert("–§–æ—Ç–æ/—Ñ–∞–π–ª —Ç–∞“£–¥–∞."); return; }

      const nick = (nickEl.value||"").trim() || "Anonymous";
      const city = (cityEl.value||"").trim();
      const wasteType = (wasteEl.value||"").trim();
      const status = (statusEl.value||"").trim();
      const desc = (descEl.value||"").trim();
      const geo = (geoText.value||"").trim();

      const parsed = parseLatLon(geo);
      const latlon = parsed || lastLatLng;
      if(!latlon){
        alert("GPS –∫–µ—Ä–µ–∫ (—Ä“±“õ—Å–∞—Ç –±–µ—Ä).");
        return;
      }

      const reports = loadReports();
      const r = {
        id: "r_" + Math.random().toString(16).slice(2) + "_" + Date.now(),
        createdAt: new Date().toISOString(),
        nick, city, wasteType, status, desc,
        lat: latlon.lat, lon: latlon.lon,
        fileName: selectedFile.name
      };
      reports.unshift(r);
      saveReports(reports);

      incScore(nick);
      renderLeaderboard();

      renderMarkers();
      refreshReportChart();
      map.setView([latlon.lat, latlon.lon], 15);

      showShare(r);
      alert("‚úÖ –°–∞“õ—Ç–∞–ª–¥—ã");
    });

    clearBtn.addEventListener("click", ()=>{
      if(!confirm("Local –¥–µ—Ä–µ–∫—Ç–µ—Ä–¥—ñ ”©—à—ñ—Ä—É?")) return;
      localStorage.removeItem(STORAGE_REPORTS);
      renderMarkers();
      refreshReportChart();
      alert("–¢–∞–∑–∞–ª–∞–Ω–¥—ã");
    });

    /* =========================
       CHARTS
    ========================= */
    let cityChart, reportChart;

    function initCharts(){
      const demoCities = ["–ê–ª–º–∞—Ç—ã", "–ê—Å—Ç–∞–Ω–∞", "–®—ã–º–∫–µ–Ω—Ç", "“ö–∞—Ä–∞“ì–∞–Ω–¥—ã", "–ê“õ—Ç”©–±–µ", "–ê—Ç—ã—Ä–∞—É"];
      const demoValues = [128, 104, 92, 81, 66, 54];

      cityChart = new Chart($("cityChart"), {
        type: "bar",
        data: { labels: demoCities, datasets: [{ label: "–î–µ–º–æ", data: demoValues, borderWidth: 1 }] },
        options: {
          responsive: true,
          plugins: { legend: { labels: { color: "rgba(255,255,255,.78)" } } },
          scales: {
            x: { ticks: { color: "rgba(255,255,255,.70)" }, grid: { color: "rgba(255,255,255,.08)" } },
            y: { ticks: { color: "rgba(255,255,255,.70)" }, grid: { color: "rgba(255,255,255,.08)" }, beginAtZero:true }
          }
        }
      });

      reportChart = new Chart($("reportChart"), {
        type: "bar",
        data: { labels: ["‚Äî"], datasets: [{ label: "Local", data: [0], borderWidth: 1 }] },
        options: {
          responsive: true,
          plugins: { legend: { labels: { color: "rgba(255,255,255,.78)" } } },
          scales: {
            x: { ticks: { color: "rgba(255,255,255,.70)" }, grid: { color: "rgba(255,255,255,.08)" } },
            y: { ticks: { color: "rgba(255,255,255,.70)" }, grid: { color: "rgba(255,255,255,.08)" }, beginAtZero:true }
          }
        }
      });

      refreshReportChart();
    }
    initCharts();
    renderMarkers();

    /* =========================
       ORGS: list + map (Fixed & Creative)
    ========================= */
    // –ù–∞“õ—Ç—ã –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—Ç–∞—Ä–º–µ–Ω (–õ–æ–≥–∏–∫–∞–ª—ã“õ –¥“±—Ä—ã—Å —à–µ—à—ñ–º)
    const orgs = [
      { 
        name:"Recycle Birge", 
        city:"–ê–ª–º–∞—Ç—ã", 
        address:"–ê–ª–º–∞—Ç—ã, “ö–∞–∑–∞“õ—Å—Ç–∞–Ω", 
        sourceHint:"recyclebirge.kz", 
        lat: 43.237163,  // –ù–∞“õ—Ç—ã –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
        lon: 76.945625 
      },
      { 
        name:"ECO Network", 
        city:"–ê–ª–º–∞—Ç—ã", 
        address:"–ê–ª–º–∞—Ç—ã, –ø—Ä–æ—Å–ø–µ–∫—Ç –ê–ª—å-–§–∞—Ä–∞–±–∏ 47/79", 
        sourceHint:"econetwork.green", 
        lat: 43.219760, 
        lon: 76.936085 
      },
      { 
        name:"KazWaste (–∞—Å—Å–æ—Ü–∏–∞—Ü–∏—è)", 
        city:"–ê–ª–º–∞—Ç—ã", 
        address:"–ê–ª–º–∞—Ç—ã, –ø—Ä. –ê–ª—å-–§–∞—Ä–∞–±–∏ 15, –±–ª–æ–∫ 4–≤", 
        sourceHint:"waste-ex.kz", 
        lat: 43.226065, 
        lon: 76.945037 
      },
      { 
        name:"–ê–û ¬´–ñ–∞—Å—ã–ª –¥–∞–º—É¬ª", 
        city:"–ê—Å—Ç–∞–Ω–∞", 
        address:"–ê—Å—Ç–∞–Ω–∞, –ø—Ä. “ö–∞–±–∞–Ω–±–∞–π –±–∞—Ç—ã—Ä 11/5", 
        sourceHint:"recycle.kz", 
        lat: 51.134563, 
        lon: 71.413240 
      }
    ];

    // –ö–∞—Ä—Ç–∞–Ω—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è–ª–∞—É
    const orgMap = L.map("orgMap", { zoomControl: false }); // Zoom –∫–Ω–æ–ø–∫–∞—Å—ã–Ω –∞–ª—ã–ø —Ç–∞—Å—Ç–∞–¥—ã–º (”ô–¥–µ–º—ñ—Ä–µ–∫ –∫”©—Ä—ñ–Ω—É “Ø—à—ñ–Ω)
    orgMap.setView([43.238949, 76.889709], 10);
    
    // –ö–∞—Ä—Ç–∞ —Å—Ç–∏–ª—ñ (Dark mode –∫–∞—Ä—Ç–∞)
    L.tileLayer("https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png", {
      maxZoom: 19, attribution: '&copy; OpenStreetMap &copy; CARTO'
    }).addTo(orgMap);
    
    const orgLayer = L.layerGroup().addTo(orgMap);
    
    // –ú–∞—Ä–∫–µ—Ä–ª–µ—Ä–¥—ñ —Å–∞“õ—Ç–∞—É (–∫–µ–π—ñ–Ω popup –∞—à—É “Ø—à—ñ–Ω)
    const markersMap = {};

    function renderOrgList(){
      $("orgList").innerHTML = orgs.map((o, index)=>`
        <div class="commentItem" style="margin-top:0; margin-bottom:10px; background:rgba(0,0,0,0.4); border:1px solid rgba(84,255,176,0.15);">
          <div class="commentTop">
            <div class="commentName" style="color:var(--accent);">${o.name}</div>
            <div class="pill" style="padding:8px 10px"><span class="dot"></span>${o.city}</div>
          </div>
          <div class="commentText">${o.address}<br/><span style="color:rgba(255,255,255,.62)">${o.sourceHint}</span></div>
          <div style="margin-top:10px; display:flex; gap:10px; flex-wrap:wrap;">
            <button class="btn primary" style="font-size:12px; padding:8px 12px;" type="button" onclick="focusOrg(${index})">
              üó∫ –ö–∞—Ä—Ç–∞–¥–∞ –∫”©—Ä—Å–µ—Ç—É
            </button>
          </div>
        </div>
      `).join("");
    }
    renderOrgList();

    // –ö–∞—Ä—Ç–∞“ì–∞ –º–∞—Ä–∫–µ—Ä–ª–µ—Ä–¥—ñ “õ–æ—é
    function plotOrgs(){
      orgLayer.clearLayers();
      orgs.forEach((o, index) => {
        // –ê—Ä–Ω–∞–π—ã –∂–∞—Å—ã–ª –º–∞—Ä–∫–µ—Ä (Creative)
        const greenIcon = L.divIcon({
            className: 'custom-div-icon',
            html: "<div style='background-color:#54ffb0; width:12px; height:12px; border-radius:50%; box-shadow:0 0 10px #54ffb0; border:2px solid #fff;'></div>",
            iconSize: [12, 12],
            iconAnchor: [6, 6],
            popupAnchor: [0, -10]
        });

        const m = L.marker([o.lat, o.lon], { icon: greenIcon }).addTo(orgLayer);
        m.bindPopup(`
          <div style="font-family:Inter,sans-serif; color:#333; font-size:13px;">
            <b style="color:#071b13">${o.name}</b><br/>
            ${o.address}
          </div>
        `);
        markersMap[index] = m; // –ú–∞—Ä–∫–µ—Ä–¥—ñ —Å–∞“õ—Ç–∞–ø “õ–æ—è–º—ã–∑
      });
    }
    plotOrgs();

    // –ö–Ω–æ–ø–∫–∞ –±–∞—Å“õ–∞–Ω–¥–∞ –∂“±–º—ã—Å —ñ—Å—Ç–µ–π—Ç—ñ–Ω —Ñ—É–Ω–∫—Ü–∏—è
    function focusOrg(index){
      const o = orgs[index];
      if(!o) return;

      // 1. –ö–∞—Ä—Ç–∞–Ω—ã —Å–æ–ª –∂–µ—Ä–≥–µ "“±—à—ã—Ä—ã–ø" –∞–ø–∞—Ä—É (Animation)
      orgMap.flyTo([o.lat, o.lon], 16, {
        animate: true,
        duration: 1.5 // 1.5 —Å–µ–∫—É–Ω–¥—Ç–∞ –±–∞—è—É –±–∞—Ä—É
      });

      // 2. –ë–∞—Ä“ì–∞–Ω —Å–æ“£ popup-—Ç—ã –∞—à—É
      const marker = markersMap[index];
      if(marker){
        setTimeout(() => {
            marker.openPopup();
        }, 1500); // “∞—à—ã–ø –±–∞—Ä“ì–∞–Ω —Å–æ“£ –∞—à—ã–ª–∞–¥—ã
      }
    }
    // –ì–ª–æ–±–∞–ª —Ñ—É–Ω–∫—Ü–∏—è –µ—Ç—É
    window.focusOrg = focusOrg;

    /* =========================
       COMMENTS + RATING
    ========================= */
    const starRow = $("starRow");
    const cName = $("cName");
    const cText = $("cText");
    const cSend = $("cSend");
    const commentList = $("commentList");
    let currentStars = 5;

    function renderStars(){
      starRow.innerHTML = "";
      for(let i=1;i<=5;i++){
        const b = document.createElement("button");
        b.className = "starBtn" + (i<=currentStars ? " active":"");
        b.type="button";
        b.textContent = "‚≠ê";
        b.onclick = ()=>{ currentStars=i; renderStars(); };
        starRow.appendChild(b);
      }
    }
    renderStars();

    function loadComments(){ return loadJSON(STORAGE_COMMENTS, []); }
    function saveComments(items){ saveJSON(STORAGE_COMMENTS, items); }

    function renderComments(){
      const items = loadComments();
      commentList.innerHTML = items.map(c=>`
        <div class="commentItem">
          <div class="commentTop">
            <div class="commentName">${c.name}</div>
            <div class="commentStars">${"‚≠ê".repeat(c.stars)}</div>
          </div>
          <div class="commentText">${c.text}</div>
          <div style="margin-top:8px; color:rgba(255,255,255,.55); font-size:12px;">${new Date(c.at).toLocaleString()}</div>
        </div>
      `).join("") || `<div style="margin-top:12px; color:var(--muted)">”ò–ª—ñ –ø—ñ–∫—ñ—Ä –∂–æ“õ</div>`;
    }
    renderComments();

    cSend.addEventListener("click", ()=>{
      const name = (cName.value||"").trim() || "Anonymous";
      const text = (cText.value||"").trim();
      if(!text){ alert("–ü—ñ–∫—ñ—Ä –∂–∞–∑."); return; }

      const items = loadComments();
      items.unshift({ name, text, stars: currentStars, at: new Date().toISOString() });
      saveComments(items);

      cText.value = "";
      renderComments();
      alert("‚úÖ –ñ—ñ–±–µ—Ä—ñ–ª–¥—ñ");
    });

    /* =========================
       LAST REPORT MINI (on load)
    ========================= */
    function updateLastMini(){
      const reports = loadReports();
      if(!reports.length){ lastReportMini.textContent = "”ò–ª—ñ –∂–æ“õ"; return; }
      const r = reports[0];
      const text = buildShareText(r);
      lastReportMini.textContent = text;
      shareBox.style.display = "block";
      showShare(r);
    }
    updateLastMini();
  </script>
</body>
</html>
